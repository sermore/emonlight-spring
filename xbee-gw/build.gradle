
sourceSets {
	main {
		java {
			exclude '**/Kafka*.java'
		}
	}
    test {
        java {
            exclude '**/Kafka*.java'
        }
    }
}

tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}

jar {
    baseName = 'emonlight-xbee-gw'
}

test {
	exclude '**/RouterTest.class'
	exclude '**/EndDeviceTest.class'
	exclude '**/PulsePowerAccuracyTest.class'
	systemProperty("java.library.path", "/usr/lib/jni")
}

bootRun {
	systemProperty("java.library.path", "/usr/lib/jni")
	systemProperty 'spring.profiles.active', 'dev'
}

dependencies {
	compile(project(':commons')) {
		exclude group: 'org.apache.kafka'
        exclude module: 'spring-kafka'
	}
	compile("org.springframework:spring-web")
	compile("org.springframework.boot:spring-boot-starter-activemq")
	
    compile group: 'org.rxtx', name: 'rxtx', version:'2.1.7'
    compile(group: 'com.digi.xbee', name: 'xbjlib', version:'1.1.1') {
		exclude(module: 'rxtx-native')
		exclude(module: 'slf4j-jdk14')
    }
	
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version:'2.8.5'
    compile group: 'javax.validation', name: 'validation-api', version:'1.1.0.Final'
    compile group: 'org.hibernate', name: 'hibernate-validator', version:'5.0.1.Final'
//    compile group: 'javax.el', name: 'javax.el-api', version:'3.0.1-b04'
//    compile group: 'org.glassfish', name: 'javax.el', version:'3.0.1-b08'

	testCompile("org.apache.activemq:activemq-broker")

}
